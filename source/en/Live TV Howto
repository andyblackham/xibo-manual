This is a guide to showing live TV in a Xibo layout.
 
One solution to the live TV problem is to create an IP video stream of the live broadcast and then display the stream in an HTML frame.  There  are two applications needed to achieve this:
 * TVHeadend - which generates the IP video stream and
 * VLC (Video Lan Client) which displays the stream on the client device.
 
We will assume you are using an Android client for your Xibo server in this example.
This how-to is written and tested using DVB-T standards, but you should be able to stream any source which is compatible with TVHeadend, including HD material from cable, satellite and terrestrial.
 
Hardware:
Raspberry Pi (this document is tested on a Model B)
A 4GB SD card with Raspbian
DVB tuner (I'm using an August DVB-T208 from ebay)
 
Software:
Raspbian operating system dated 2015-02-16  (http://www.raspberrypi.org/downloads/)
Linux driver for your USB Tuner
TV Headend   (http://tvheadend.org)
VLC	     (http://www.videolan.org/vlc/download-android.html)
 
 
Getting started:
We assume you have your Raspberry Pi setup on your network and you're logged in to the command line.

The first task is to make sure you have drivers for your chosen USB TV receiver.
To test this, plug in your USB reciever and run the command
````dmesg````
and look at the last few lines, here are the last 8 lines from mine:

usb 1-1.2: new high-speed USB device number 5 using dwc_otg
usb 1-1.2: New USB device found, idVendor=187f, idProduct=0202
usb 1-1.2: New USB device strings: Mfr=1, Product=2, SerialNumber=0
usb 1-1.2: Product: MDTV Receiver
usb 1-1.2: Manufacturer: MDTV Receiver
DVB: registering new adapter (Siano Nice Digital Receiver)
usb 1-1.2: DVB: registering adapter 0 frontend 0 (Siano Mobile Digital MDTV Receiver)...
usbcore: registered new interface driver smsusb

If you get a 'file not found message here', then you will need to obtain a driver. This
is somewhat beyond this walk through, however most of the models on the market today
use one of a few common chipsets.

The August T208 unit I'm using uses a Siano DVD Nova chip.
To install the driver, change directory 
````cd /lib/firmware````

download the driver (remember this is the driver I need for my adaptor, yours may be different)
````sudo wget http://www.linuxtv.org/downloads/firmware/dvb_nova_12mhz_b0.inp````

once the driver is installed, we can install TV Headend and update all the software.
First add the TV Headend repository
````cd /etc/apt
sudo nano sources.list````

add the following line to the file
````deb http://apt.tvheadend.org/stable wheezy main````

Now add the signing key	
````curl http://apt.tvheadend.org/repo.gpg.key | sudo apt-key add - ````

Add the repository
````sudo apt-add-repository http://apt.tvheadend.org/stable````

Finally, update the list of updates and perform the upgrade
````sudo apt-get update
sudo apt-get upgrade````

At this point, I'd reboot and check the dmesg file
````reboot````

one your're back at the command line, check the driver




Now for the Xibo bit:
You need VLC installed on your client machine.

Create an "Embedded" item on a region timeline on a page in Xibo.
Note: You need either to enable anonymous access to the page or create a user with a non-secure password on the tvheadend box. in the below example, you will need to customise the line:

http://username:password@hostname:9981/playlist/channelid/33
Settings for the Embedded HTML

HTML To Embed

<body bgcolor="#000000" onload=start()>
    <object classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921" codebase="http://downloads.videolan.org/pub/videolan/vlc/latest/win32/axvlc.cab" width="749" height="420" id="vlc" events="True">
      <param name="Src" value="http://username:password@hostname:9981/playlist/channelid/33" />
      <param name="ShowDisplay" value="False" />
      <param name="AutoLoop" value="False" />
      <param name="Controls" value="False" />
      <param name="AutoPlay" value="True" />
    </object>
  </body>
Head Content to Embed

<script type="text/javascript">
function EmbedInit() {
    // Init will be called when this page is loaded in the client.
    timeout = setTimeout(subtitles,1000);
    return;
    }
function subtitles() {
    var vlc = document.getElementById("vlc");
    <!--vlc.audio.toggleMute();-->
    vlc.subtitle.track='505';
    vlc.video.deinterlace.enable("blend")
    }
</script>
I had issues getting the embedded VLC to display consistently (i just saw a black page sometimes), and my rather naff solutions were twofold; I added a video item to the Xibo timeline to show the BBC intro (12 seconds), this seems to give the page chance to load properly.. and i inserted a delay in the subtitles loading, which again seems to allow it to load properly. My TV item loads for 720 seconds and then it recycles back to the 12 seconds BBC intro video.

Sorry i can't give you a better guide, i do wish i'd made proper notes when setting it up and if i redo it, i will!!
